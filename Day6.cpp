//

#include <iostream>
#include <vector>
#include <sstream>
#include <utility>
#include <string>
using namespace std;


void parse(const string& input, vector<vector<char>>& arr, pair<int, int>& start)
{
    stringstream iss(input);
    string line;
    while (getline(iss, line))
    {
        vector<char> temp;
        for (int i = 0; i < line.length(); i++)
        {
            if (line[i] != '#' && line[i] != '.')
            {
                start = {arr.size(), i};
            }
            temp.push_back(line[i]);
        }
        arr.push_back(temp);
    }
}


int positions(vector<vector<char>> arr, pair<int, int> start)
{
    int result = 0;
    int &i = start.first;
    int &j = start.second;
    int direction =
    (arr[i][j] == '^') ? 0 :
    (arr[i][j] == '>') ? 1 :
    (arr[i][j] == 'v') ? 2 : 3;

    while (j < arr[0].size() && j >= 0 && i < arr.size() && i >= 0)
    {
        if (direction == 0)
        {
            while (i >= 0 && arr[i][j] != '#')
            {
                if (arr[i][j] != 'X')
                {
                    arr[i][j] = 'X';
                    result++;
                }
                i--;
            }
            if (i >= 0)
            {
                direction++;
                i++;
            }
        }
        if (direction == 1)
        {
            while (j < arr[0].size() && arr[i][j] != '#')
            {
                if (arr[i][j] != 'X')
                {
                    arr[i][j] = 'X';
                    result++;
                }
                j++;
            }
            if (j < arr[0].size())
            {
                direction++;
                j--;
            }
        }
        if (direction == 2)
        {
            while (i < arr.size() && arr[i][j] != '#')
            {
                if (arr[i][j] != 'X')
                {
                    arr[i][j] = 'X';
                    result++;
                }
                i++;
            }
            if (i < arr.size())
            {
                direction++;
                i--;
            }
        }
        if (direction == 3)
        {
            while (j >= 0 && arr[i][j] != '#')
            {
                if (arr[i][j] != 'X')
                {
                    arr[i][j] = 'X';
                    result++;
                }
                j--;
            }
            if (j >= 0)
            {
                direction = 0;
                j++;
            }
        }
    }
    return result;
}





int main()
{
    pair<int, int> start;
    vector<vector<char>> arr;
    string input = R"(.....#..#................#...###..............................#..#.......................................#........................
..................#...........#.............#.#.#.#......................#.......##.........................................#.##.#
....#.......................................................#.......#.........................#...................................
.#.............#...........#..........................#.....................................................................#.....
....#..#................#..........................#..#..#...#..........#....................................#.#..................
...........................#....#.##......................................................................##...................#..
...........................#.....................................#....##.#..#..#.....#................#...........................
.....#..............#........#........................................###...........#..................................#..........
........#..............#............................................................#..............................#..............
......#..............................#..........................#................................................#................
................#..#......................#.......................................................................................
..#.............................##.....#.......................................................#..................................
#.......................................#...#.............................#...........#.#.........#.............#.................
..............................#................................#...#................................................#.............
..............#...............#.................#........................#...#.....#................#.............................
...................................#...#...........#...............#.........#............#...............##...........#.#........
.........................#..................................................................#.........#...........................
.##.............#................................#.......#.........#..............................................#...............
....#.................#.....#.......................................................#......................#......................
#..................................#................#......#.........................#............................................
.....#..................#................#........................................................................................
......#......#.......#......#.#....................#..................................#...................#...#...............#.#.
.................................................#......#......#.........#..................#.....................................
...........#.....#..................................#...#........#......#...#..................#.##....#.................#.......#
........#..#....................................#...................................................................#.......#.....
...........#..............#.............................................#..............#.#........#..##.................#.......#.
......................................#............................................#...#..........................................
.......#.............#............................#.........#................#.......................................#............
..........................................................................#.............#...............................#.........
......##...............#..........................................................................................#...............
.........#..#................................................#..................................#.......#.....................#...
...#..............................#.#.............#........................#..............#..............................#........
.......................................................................................................#.............#............
.....#.......................#..#..........#.....................................................................................#
..........##..........................#...............................#.......................#...............#.............#..#..
..#....#....................#.............#......#.............................................................#..................
.#....#..........................................................................................#.#......#.....................#.
..........................#.......#......................................................#........................................
.#......#.#......................................................................#........#.........#.........#.#.................
.....................................#........#..........#.............................#..#............#....................#.....
............#.........#.........................................................................................#........##.......
....................#.................#.........................#......................#......................................#...
............#....................................................#..#.........#..........#...................................#....
#.....#...................#.........#.#..................................................................................#........
.............................##.......#........................................#..........#..............#..#.....................
.............#....................................^.##....................................................#.....................#.
........................#.#..#......................#............#...#..........................#.......................#.........
......................#.......................................................................#.#..#......................#.......
..................................................#.......##...................................#..................................
.............................#..........................................#..............#.#.............................#..........
....#.............#..................#.....#..........................#....#..........#.........#........................#.......#
...............#...........................#...............#....................................................................#.
..........................#.............#..........................................................#..............................
...............#...................................#.......................#.............................#...............#........
....#......................##......#.#................................................#................#.............#............
.......#...................#..........................................#.....................................#.....................
.#.....................#..........................................................................................................
........#.#...........#....#...................................#..#.#....#..................#.#...............#......#........#...
#....#............#...#.........#...........#......................#.....................#........................................
........................#.............#.................................................................#.....#...................
...............#....................#................##...#...........#.#..............#..........................................
........................#...........##.......#.....#...........................#..#...................................#...........
.............#........................................................................#.....#.#.#.................##..............
......#......................#.........#..............#...............#................#..................#........#..............
..........#..........................................................................................................#............
..................#...........#................#..#.#..............#.#........#...............................#....#..........##..
...........#..............#...................................................#...................................................
..................................................................#............#............................#.................#...
....#...........#...................#..........................................#..........#...........................#...........
........................................#....................#....#..#........................#.....#.............................
................#........................................................................................................#........
...................#......#.....#..............#..................................#...#.............#........................#....
...................#............................................................#.............#...................................
.......#........................#..........#.............#....#....#.............#.............................#...#..............
...#...............##.............................................................#.................#........................#....
.............................#.................#..................#.#....................#.....................................###
...............#....#.....................................................#..............................................#.......#
....................................#..................................#.......................#..................................
#..#............#................................#....#...............#.........#...........................#.....................
...........................................................................................................#.............#....#..#
...................................#....#.........#..................#......#....................#..........#.....................
...........#.............................................................##.#......#.....#......................#...#.............
..#...................................................................................#.................#.........#...............
.......#..#..#.................................#.....................#..............................................#....#........
..........................#....................................................................................................#..
..#.............#......#..................................#..#.......................#..........#...#...##......#.................
....#...................#....#.........................................................#..................................#.......
.................................#...............#.....................#..#.......................................................
...........#......................................................................................................#...........#...
.............#.................................................................#............#..................#........#.........
.......................#.......#..........................................................#...............................#.....#.
...........................................................................#....#....#............................#...............
....................#............#................................................................................................
.....#.........................................#...................#.....#...#.......#..............#............................#
...#.......................................#.........#............#...................#......................#....#............##.
...##.#...........................................#...#................#..........................................................
.......#..##............#..#............#......................................#...............#...........#.........#......#..#..
...............................................................................#.........##........##.............#...............
......#...............................#.........#............#..............................#.........................#....#......
#...........................#....#..#....................................................#..................#.....................
......#.##.......#...........................#...#........#.................................................................#.....
..........#.................................................#..........................................#....#.#.........#.#.#.....
...#...#.....#......#.......#..#.#.........#...............................................................#..........##.........#
..#...#...#..........................................#............................#..........#..........#.........................
#....#............#......#.............#.#.......##...............#................#.............................#................
...............................#...............................................................#..............#.........#.........
....#..............#..#............................................................#.......#................#...................#.
....#...........................#.............................#.............#....#.........#....#...................#.......#.#...
.......#.......................................#....#........#..............#........#....................#.......................
........#...........................#................................#............................................................
...........#....#........#......................................#...........#.................................#..........#........
........#..........................................................................................#...........................#..
#........................................#.................................................................##...#.....#...........
............#..............#...........#............#................#..#.......................#.#.....#.............##..........
..........#..................#..................................................................................................#.
.....................................#..............##..................................#.............#........#..................
..............................#..................#...............#......#..##....................#................................
..#............#....................................#.......................................................#...#.................
..................###..........................#.......#.................................#........................................
.....#.#..........................................................#...........##...#.....#.................................#......
.............................................#.............................#......................#.............#.......#.....#...
...#......................#............#..................................#........................#....................#.......#.
....##..........#..........#...#.............#............#....#......#....................#...........#..#..........#............
..#......................#............#..#..#.......................#.........#......#...............#............#..#............
..#.............#.#.............................#......#......#.........................#......#.#...............#...............#
...#...........#...............#.....................................#.................#....#....#...................#.#...#......
.......#........#....................#.............................................#..............................................
........#............................#....#....#........#...................#.#...............#...#.....................#.........
.##........#.................#...........#...............................##.#.....................................................
.###...........................#........#..#................................................#...........................#.........)";
    parse(input, arr, start);
    cout << "Distinct positions: " << positions(arr, start) << endl;

    return 0;
}